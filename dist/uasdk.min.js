var UniversalAdSDK=function(){"use strict";const h="[UniversalAdSDK]",n={...{shrinkRatio:.75,adType:"lbar-bottom-right",adAspectRatio:.25,transitionDuration:"0.5s",minVideoWidth:300,minVideoHeight:200,allowYoutube:!1,allowYoutubeResize:!1,autoRun:!0,autoRunDelay:5,defaultContent:{rightHtml:'<div style="background:#333; color:white; height:100%; display:flex; align-items:center; justify-content:center; text-align:center; padding:10px;"><div><h3>Ad Space</h3><p>Your Ad Here</p></div></div>',bottomHtml:'<div style="background:#444; color:white; height:100%; display:flex; align-items:center; justify-content:center;"><b>Banner Ad</b></div>',overlayHtml:'<div style="background:rgba(0,0,0,0.7); color:white; height:100%; display:flex; align-items:center; justify-content:center;"><b>Overlay Ad</b></div>',pipHtml:'<div style="background:#222; color:white; height:100%; display:flex; align-items:center; justify-content:center;"><b>PiP Ad</b></div>',bannerVerticalHtml:'<div style="background:#555; color:white; height:100%; display:flex; align-items:center; justify-content:center;"><b>Vertical Banner Ad</b></div>',bannerHorizontalHtml:'<div style="background:#666; color:white; height:100%; display:flex; align-items:center; justify-content:center;"><b>Horizontal Banner Ad</b></div>',richmediaBackgroundHtml:"",richmediaForegroundHtml:"",duration:10}},...window.UniversalAdSettings||{}},p=new WeakMap;function y(){return{position:"absolute",zIndex:"10000",overflow:"hidden",transition:`all ${n.transitionDuration} ease`}}function g(t,e){if(!t){e();return}t.getBoundingClientRect(),requestAnimationFrame(e)}function k(){const t=parseFloat(n.transitionDuration);return Number.isFinite(t)?t*1e3:500}let b=null;function C(t=""){if(window.trustedTypes){if(!b)try{b=window.trustedTypes.createPolicy("universal-ad-sdk",{createHTML:e=>e})}catch(e){return console.warn(`${h} Trusted Types policy creation failed`,e),t||""}try{return b.createHTML(t||"")}catch(e){return console.warn(`${h} Trusted Types conversion failed`,e),""}}return t||""}function a(t,e){if(!t)return;if(!e){t.replaceChildren();return}const o=C(e);if(window.TrustedHTML&&o instanceof window.TrustedHTML){t.innerHTML=o;return}try{const i=document.createRange();i.selectNodeContents(t);const r=i.createContextualFragment(typeof o=="string"?o:String(o));t.replaceChildren(r)}catch(i){console.warn(`${h} Failed to set slot content`,i),t.textContent=""}E(t)}function E(t){t&&t.querySelectorAll("video, audio").forEach(e=>{if(e.dataset.universalAdAutoplay==="1")return;e.dataset.universalAdAutoplay="1",e.autoplay=!0,e.setAttribute("playsinline",""),e.muted||(e.muted=!0,e.setAttribute("muted",""));const o=()=>{const i=e.play();i&&typeof i.catch=="function"&&i.catch(r=>console.warn(`${h} Ad media playback blocked`,r))};e.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA?o():(e.addEventListener("canplay",o,{once:!0}),setTimeout(o,500))})}function W(t){const e=window.getComputedStyle(t);!(t.classList&&t.classList.contains("video-wrapper"))&&e.display==="flex"&&(t.style.display="block"),e.overflow!=="visible"&&(t.style.overflow="visible"),e.pointerEvents==="none"&&(t.style.pointerEvents="auto"),e.transform!=="none"&&(t.style.transform="none"),e.position==="static"&&(t.style.position="relative")}function H(t){const e=t.parentNode,o=t.nextSibling,i=document.createElement("div");i.classList.add("ad-wrapper");const r=window.getComputedStyle(t);W(e),Object.assign(i.style,{position:"relative",display:"block",width:r.width,height:r.height,marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,zIndex:r.zIndex,overflow:"hidden",backgroundColor:"#000"}),e.insertBefore(i,t),i.appendChild(t);const s={width:t.style.width,height:t.style.height,position:t.style.position,top:t.style.top,left:t.style.left,right:t.style.right,bottom:t.style.bottom,zIndex:t.style.zIndex,transition:t.style.transition};return Object.assign(t.style,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",transition:`all ${n.transitionDuration} ease`}),{wrapper:i,originalStyles:s,originalParent:e,originalNextSibling:o}}function j(t){let e=t;for(;e.parentElement&&e.parentElement!==document.body;){const o=e.parentElement;if([...o.children].filter(r=>r.tagName!=="SCRIPT"&&r.tagName!=="STYLE").length>1)return o;e=o}return t}const w=["lbar-bottom-right","lbar-bottom-left","lbar-top-right","lbar-top-left"];function L(t){const e=y();t.rightAdSlot=document.createElement("div"),t.leftAdSlot=document.createElement("div"),t.bottomAdSlot=document.createElement("div"),t.topAdSlot=document.createElement("div"),Object.assign(t.rightAdSlot.style,e,{right:0,top:0,width:"0%",height:"100%",zIndex:"10001"}),Object.assign(t.leftAdSlot.style,e,{left:0,top:0,width:"0%",height:"100%",zIndex:"10001"}),Object.assign(t.bottomAdSlot.style,e,{bottom:0,left:0,width:"100%",height:"0%"}),Object.assign(t.topAdSlot.style,e,{top:0,left:0,width:"100%",height:"0%"}),t.wrapper.appendChild(t.rightAdSlot),t.wrapper.appendChild(t.leftAdSlot),t.wrapper.appendChild(t.bottomAdSlot),t.wrapper.appendChild(t.topAdSlot)}function F(t,e,o){a(t.rightAdSlot,e),a(t.leftAdSlot,e),a(t.bottomAdSlot,o),a(t.topAdSlot,o)}function B(t,e,o,i){const{videoW:r,videoH:s,adW:l,adH:d}=i;switch(F(t,o.rightHtml,o.bottomHtml),e){case"lbar-bottom-right":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left","0","important"),t.rightAdSlot.style.width=l,t.rightAdSlot.style.height=s,t.rightAdSlot.style.top="0",t.bottomAdSlot.style.height=d;break;case"lbar-bottom-left":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left",l,"important"),t.leftAdSlot.style.width=l,t.leftAdSlot.style.height=s,t.leftAdSlot.style.top="0",t.bottomAdSlot.style.height=d;break;case"lbar-top-right":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top",d,"important"),t.elementToWrap.style.setProperty("left","0","important"),t.rightAdSlot.style.width=l,t.rightAdSlot.style.height=s,t.rightAdSlot.style.top=d,t.topAdSlot.style.height=d;break;case"lbar-top-left":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top",d,"important"),t.elementToWrap.style.setProperty("left",l,"important"),t.leftAdSlot.style.width=l,t.leftAdSlot.style.height=s,t.leftAdSlot.style.top=d,t.topAdSlot.style.height=d;break}}const A=["banner-right","banner-left","banner-top","banner-bottom"];function O(t,e){const o=y();e==="banner-right"&&(t.bannerVerticalAdSlot=document.createElement("div"),Object.assign(t.bannerVerticalAdSlot.style,o,{right:0,top:0,width:"0%",height:"100%"}),t.wrapper.appendChild(t.bannerVerticalAdSlot)),e==="banner-left"&&(t.bannerVerticalAdSlot=document.createElement("div"),Object.assign(t.bannerVerticalAdSlot.style,o,{left:0,top:0,width:"0%",height:"100%"}),t.wrapper.appendChild(t.bannerVerticalAdSlot)),e==="banner-top"&&(t.bannerHorizontalAdSlot=document.createElement("div"),Object.assign(t.bannerHorizontalAdSlot.style,o,{top:0,left:0,width:"100%",height:"0%"}),t.wrapper.appendChild(t.bannerHorizontalAdSlot)),e==="banner-bottom"&&(t.bannerHorizontalAdSlot=document.createElement("div"),Object.assign(t.bannerHorizontalAdSlot.style,o,{bottom:0,left:0,width:"100%",height:"0%"}),t.wrapper.appendChild(t.bannerHorizontalAdSlot))}function R(t,e,o,i){const{videoW:r,videoH:s,adW:l,adH:d}=i;switch(a(t.bannerVerticalAdSlot,o.bannerVerticalHtml),a(t.bannerHorizontalAdSlot,o.bannerHorizontalHtml),e){case"banner-right":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height","100%","important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left","0","important"),t.bannerVerticalAdSlot.style.width=l,t.bannerVerticalAdSlot.style.height="100%",t.bannerVerticalAdSlot.style.top="0",t.bannerVerticalAdSlot.style.left="auto";break;case"banner-left":t.elementToWrap.style.setProperty("width",r,"important"),t.elementToWrap.style.setProperty("height","100%","important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left",l,"important"),t.bannerVerticalAdSlot.style.width=l,t.bannerVerticalAdSlot.style.height="100%",t.bannerVerticalAdSlot.style.top="0";break;case"banner-top":t.elementToWrap.style.setProperty("width","100%","important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top",d,"important"),t.elementToWrap.style.setProperty("left","0","important"),t.bannerHorizontalAdSlot.style.height=d,t.bannerHorizontalAdSlot.style.width="100%",t.bannerHorizontalAdSlot.style.top="0",t.bannerHorizontalAdSlot.style.left="0",t.bannerHorizontalAdSlot.style.right="auto";break;case"banner-bottom":t.elementToWrap.style.setProperty("width","100%","important"),t.elementToWrap.style.setProperty("height",s,"important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left","0","important"),t.bannerHorizontalAdSlot.style.height=d,t.bannerHorizontalAdSlot.style.width="100%",t.bannerHorizontalAdSlot.style.bottom="0",t.bannerHorizontalAdSlot.style.left="0",t.bannerHorizontalAdSlot.style.right="auto";break}}const v=["overlay-top","overlay-bottom"];function V(t,e){const o=y();t.overlayAdSlot=document.createElement("div"),Object.assign(t.overlayAdSlot.style,o,{width:"100%",height:"0%",left:"0",display:"flex",alignItems:"center"}),e==="overlay-top"?t.overlayAdSlot.style.top="0":t.overlayAdSlot.style.bottom="0",t.wrapper.appendChild(t.overlayAdSlot)}function I(t,e,o,i){const{adH:r}=i;a(t.overlayAdSlot,o.overlayHtml),t.disableVideoResize||(t.elementToWrap.style.setProperty("width","100%","important"),t.elementToWrap.style.setProperty("height","100%","important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left","0","important")),t.overlayAdSlot.style.width="100%",t.overlayAdSlot.style.height=r,t.overlayAdSlot.style.left="0",t.overlayAdSlot.style.right="0",t.overlayAdSlot.style.justifyContent="center",t.overlayAdSlot.style.zIndex="10001",e==="overlay-top"?(t.overlayAdSlot.style.top="0",t.overlayAdSlot.style.bottom=""):(t.overlayAdSlot.style.bottom="0",t.overlayAdSlot.style.top="")}const P=["pip-bottom-right","pip-bottom-left","pip-top-right","pip-top-left"];function _(t,e){const o=y();t.pipAdSlot=document.createElement("div"),Object.assign(t.pipAdSlot.style,o,{width:"0px",height:"0px",borderRadius:"8px",background:"#111",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}),e==="pip-bottom-right"&&(t.pipAdSlot.style.right="10px",t.pipAdSlot.style.bottom="10px"),e==="pip-bottom-left"&&(t.pipAdSlot.style.left="10px",t.pipAdSlot.style.bottom="10px"),e==="pip-top-right"&&(t.pipAdSlot.style.right="10px",t.pipAdSlot.style.top="10px"),e==="pip-top-left"&&(t.pipAdSlot.style.left="10px",t.pipAdSlot.style.top="10px"),t.wrapper.appendChild(t.pipAdSlot)}function D(t,e){a(t.pipAdSlot,e.pipHtml),t.disableVideoResize||(t.elementToWrap.style.setProperty("width","100%","important"),t.elementToWrap.style.setProperty("height","100%","important"),t.elementToWrap.style.setProperty("top","0","important"),t.elementToWrap.style.setProperty("left","0","important")),t.pipAdSlot.style.width="150px",t.pipAdSlot.style.height="150px"}const x=["richmedia-right","richmedia-left","richmedia-bottom-right","richmedia-bottom-left","richmedia-top-right","richmedia-top-left","richmedia-top","richmedia-bottom"];function N(t,e){t.richmediaBackgroundAdSlot=document.createElement("div"),Object.assign(t.richmediaBackgroundAdSlot.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"1",overflow:"hidden",pointerEvents:"none",transition:`all ${n.transitionDuration} ease`,opacity:"0"}),t.wrapper.appendChild(t.richmediaBackgroundAdSlot);const o={position:"absolute",zIndex:"6",borderRadius:"12px",overflow:"hidden",pointerEvents:"auto",display:"block",objectFit:"cover",transition:`all ${n.transitionDuration} ease`,opacity:"0"};t.richmediaForegroundAdSlot=document.createElement("div"),e==="richmedia-right"?Object.assign(t.richmediaForegroundAdSlot.style,o,{top:"12%",left:"75%",transform:"translateX(-60%)",width:"45%",height:"70%",backgroundColor:"blue"}):e==="richmedia-left"?Object.assign(t.richmediaForegroundAdSlot.style,o,{top:"12%",right:"75%",transform:"translateX(60%)",width:"45%",height:"70%",backgroundColor:"red"}):e==="richmedia-bottom-right"?Object.assign(t.richmediaForegroundAdSlot.style,o,{bottom:"5%",right:"5%",width:"53%",height:"40%",backgroundColor:"green"}):e==="richmedia-bottom-left"?Object.assign(t.richmediaForegroundAdSlot.style,o,{bottom:"5%",left:"5%",width:"53%",height:"40%",backgroundColor:"yellow"}):e==="richmedia-top-right"?Object.assign(t.richmediaForegroundAdSlot.style,o,{top:"5%",right:"5%",width:"53%",height:"40%",backgroundColor:"purple"}):e==="richmedia-top-left"?Object.assign(t.richmediaForegroundAdSlot.style,o,{top:"5%",left:"5%",width:"53%",height:"40%",backgroundColor:"orange"}):e==="richmedia-top"?Object.assign(t.richmediaForegroundAdSlot.style,o,{top:"5%",left:"50%",transform:"translateX(-50%)",width:"90%",height:"30%",backgroundColor:"pink"}):e==="richmedia-bottom"&&Object.assign(t.richmediaForegroundAdSlot.style,o,{bottom:"5%",left:"50%",transform:"translateX(-50%)",width:"90%",height:"30%",backgroundColor:"cyan"}),t.wrapper.appendChild(t.richmediaForegroundAdSlot)}function z(t,e,o){const{elementToWrap:i}=t;switch(t.richmediaBackgroundAdSlot&&(t.richmediaBackgroundAdSlot.style.display="block",t.richmediaBackgroundAdSlot.style.opacity="1",t.richmediaBackgroundAdSlot.style.width="100%",t.richmediaBackgroundAdSlot.style.height="100%",a(t.richmediaBackgroundAdSlot,o.richmediaBackgroundHtml)),t.richmediaForegroundAdSlot&&(t.richmediaForegroundAdSlot.style.display="block",t.richmediaForegroundAdSlot.style.opacity="1",a(t.richmediaForegroundAdSlot,o.richmediaForegroundHtml)),e){case"richmedia-right":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","20%","important"),i.style.removeProperty("right"),i.style.setProperty("left","3%","important"),i.style.setProperty("z-index","7","important");break;case"richmedia-left":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","20%","important"),i.style.removeProperty("left"),i.style.setProperty("right","3%","important"),i.style.setProperty("z-index","7","important");break;case"richmedia-bottom-right":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","10%","important"),i.style.setProperty("left","10%","important"),i.style.setProperty("z-index","5","important");break;case"richmedia-bottom-left":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","10%","important"),i.style.setProperty("left","55%","important"),i.style.setProperty("z-index","5","important");break;case"richmedia-top-right":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","55%","important"),i.style.setProperty("left","10%","important"),i.style.setProperty("z-index","5","important");break;case"richmedia-top-left":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","55%","important"),i.style.setProperty("left","55%","important"),i.style.setProperty("z-index","5","important");break;case"richmedia-top":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","50%","important"),i.style.setProperty("left","20%","important"),i.style.setProperty("z-index","5","important");break;case"richmedia-bottom":i.style.setProperty("width","40%","important"),i.style.setProperty("height","40%","important"),i.style.setProperty("top","10%","important"),i.style.setProperty("left","20%","important"),i.style.setProperty("z-index","5","important");break}}function M(t){t.richmediaBackgroundAdSlot&&Object.assign(t.richmediaBackgroundAdSlot.style,{display:"block",width:"0",height:"0",opacity:"0",pointerEvents:"none",zIndex:"0"}),t.richmediaForegroundAdSlot&&Object.assign(t.richmediaForegroundAdSlot.style,{display:"block",width:"0",height:"0",opacity:"0",pointerEvents:"none",zIndex:"0"})}class U{constructor(e){this.video=e,this.wrapper=null,this.elementToWrap=null,this.rightAdSlot=null,this.bottomAdSlot=null,this.leftAdSlot=null,this.topAdSlot=null,this.overlayAdSlot=null,this.pipAdSlot=null,this.bannerVerticalAdSlot=null,this.bannerHorizontalAdSlot=null,this.richmediaBackgroundAdSlot=null,this.richmediaForegroundAdSlot=null,this.originalStyles={},this.isAdShowing=!1,this.hasAutoTriggered=!1,this.wasFluid=!1,this.minimized=!1,this._lastContent=null,this.init()}init(){if(p.has(this.video))return;const e=this.video.closest(".video-js"),o=j(this.video);o&&o.classList&&o.classList.contains("video-wrapper"),this.elementToWrap=e||this.video;const i=this.elementToWrap.getBoundingClientRect();i.width<n.minVideoWidth||i.height<n.minVideoHeight||(p.set(this.video,this),console.log(`${h} Initialized for video`,this.video),console.log(`${h} Wrapping element`,this.elementToWrap),console.log(`${h} dimensions`,i),n.autoRun&&this.setupAutoTrigger())}setupAutoTrigger(){const e=()=>{!this.hasAutoTriggered&&this.video.currentTime>n.autoRunDelay&&(this.hasAutoTriggered=!0,console.log(`${h} Auto-triggering ad for`,this.video),this.showAd(n.defaultContent),this.video.removeEventListener("timeupdate",e))};this.video.addEventListener("timeupdate",e)}handleEnterFullscreen(){!this.isAdShowing||!document.fullscreenElement||(document.fullscreenElement.appendChild(this.wrapper),this.wrapper.style.width="100%",this.wrapper.style.height="100%",this.applyCurrentAdLayout())}handleExitFullscreen(){!this.wrapper||!this._originalParent||(this._originalNextSibling?this._originalParent.insertBefore(this.wrapper,this._originalNextSibling):this._originalParent.appendChild(this.wrapper),this.applyCurrentAdLayout())}applyCurrentAdLayout(){const e=n.adType;switch(!0){case e.startsWith("lbar"):this.applyLbarLayout();break;case e.startsWith("banner"):this.applyBannerLayout();break;case e.startsWith("overlay"):this.applyOverlayLayout();break;case e.startsWith("pip"):this.applyPipLayout();break;case e.startsWith("richmedia"):z();break}}createAdControls(){this.minimized=!1,this.adControls=document.createElement("div"),Object.assign(this.adControls.style,{position:"absolute",top:"8px",right:"8px",zIndex:"99999",display:"flex",gap:"6px",pointerEvents:"auto"});const e=document.createElement("button");e.innerText="X",Object.assign(e.style,{padding:"4px 8px",fontSize:"14px",background:"rgba(0,0,0,0.5)",color:"white",border:"1px solid #999",borderRadius:"4px",cursor:"pointer",pointerEvents:"auto"}),e.onclick=i=>{i.stopPropagation(),this.hideAd()};const o=document.createElement("button");o.innerText="-",Object.assign(o.style,{padding:"4px 8px",fontSize:"14px",background:"rgba(0,0,0,0.5)",color:"white",border:"1px solid #999",borderRadius:"4px",cursor:"pointer",pointerEvents:"auto"}),o.onclick=i=>{i.stopPropagation(),this.minimizeBtn.style.display="none",this.closeBtn.style.display="none",this.minimizeAd(),this.minimized=!0},this.adControls.appendChild(o),this.adControls.appendChild(e),this.minimizeBtn=o,this.closeBtn=e}minimizeAd(){this.minimizedAd=document.createElement("div"),Object.assign(this.minimizedAd.style,{position:"absolute",bottom:"10px",right:"10px",width:"60px",height:"60px",background:"rgba(0,0,0,0.7)",borderRadius:"50%",zIndex:"999999",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px"}),this.minimizedAd.innerText="Ad",this.minimizedAd.onclick=()=>{this.minimizedAd.remove(),this.showAd(this._lastContent),this.minimized=!1},this.wrapper.appendChild(this.minimizedAd),this.hideAd()}createAdSlotsForCurrentType(e){this.rightAdSlot&&this.rightAdSlot.remove(),this.leftAdSlot&&this.leftAdSlot.remove(),this.bottomAdSlot&&this.bottomAdSlot.remove(),this.topAdSlot&&this.topAdSlot.remove(),this.overlayAdSlot&&this.overlayAdSlot.remove(),this.pipAdSlot&&this.pipAdSlot.remove(),this.bannerVerticalAdSlot&&this.bannerVerticalAdSlot.remove(),this.bannerHorizontalAdSlot&&this.bannerHorizontalAdSlot.remove(),this.richmediaBackgroundAdSlot&&this.richmediaBackgroundAdSlot.remove(),this.richmediaForegroundAdSlot&&this.richmediaForegroundAdSlot.remove(),this.rightAdSlot=null,this.leftAdSlot=null,this.bottomAdSlot=null,this.topAdSlot=null,this.overlayAdSlot=null,this.pipAdSlot=null,this.bannerVerticalAdSlot=null,this.bannerHorizontalAdSlot=null,this.richmediaBackgroundAdSlot=null,this.richmediaForegroundAdSlot=null,n.adType=e,this.createAdSlots(e)}createAdSlots(e){if(w.includes(e)){L(this);return}if(A.includes(e)){O(this,e);return}if(v.includes(e)){V(this,e);return}if(P.includes(e)){_(this,e);return}x.includes(e)&&N(this,e)}showAd(e={}){if(this.isAdShowing)return;const{wrapper:o,originalStyles:i,originalParent:r,originalNextSibling:s}=H(this.elementToWrap);this.wrapper=o,this.originalStyles=i,this._originalParent=r,this._originalNextSibling=s,this._lastContent=e,this.isAdShowing=!0,Object.assign(n,window.UniversalAdSettings||{});const l=n.adType||"bottom-right",d=e.duration??n.defaultContent.duration??10;this.createAdSlotsForCurrentType(l),this.adControls||this.createAdControls(),this.adControls.style.display="flex",this.minimizeBtn.style.display="inline-block",this.closeBtn.style.display="inline-block",this.wrapper.appendChild(this.adControls),this.wrapper.style.pointerEvents="none",this.elementToWrap.style.pointerEvents="auto",this.elementToWrap.style.position="absolute",this.elementToWrap.style.top="0",this.elementToWrap.style.left="0";const m={videoW:"75%",videoH:"75%",adW:"25%",adH:"25%"};this.elementToWrap.classList.contains("vjs-fluid")&&(this.wasFluid=!0,this.elementToWrap.classList.remove("vjs-fluid"),this.elementToWrap.style.setProperty("padding-top","0","important"));const f=this.elementToWrap.querySelector("video")||this.elementToWrap.querySelector(".vjs-tech")||this.wrapper.querySelector("video")||this.video;f&&A.includes(l)&&(f.dataset.originalObjectFit=f.style.objectFit||"",f.style.objectFit="cover"),g(this.wrapper,()=>{if(w.includes(l)){B(this,l,e,m);return}if(A.includes(l)){R(this,l,e,m);return}if(v.includes(l)){I(this,l,e,m);return}if(P.includes(l)){D(this,e);return}x.includes(l)&&z(this,l,e)}),d>0&&setTimeout(()=>this.hideAd(),d*1e3)}hideAd(){if(!this.isAdShowing)return;this.isAdShowing=!1;const e=this.elementToWrap.querySelector("video")||this.elementToWrap.querySelector(".vjs-tech")||this.wrapper.querySelector("video")||this.video;e&&e.dataset.originalObjectFit!==void 0&&(e.style.objectFit=e.dataset.originalObjectFit,delete e.dataset.originalObjectFit);const o=["width","height","position","top","left","right","bottom","zIndex"],i=()=>{o.forEach(r=>{const s=this.originalStyles[r];s!=null&&s!==""?this.elementToWrap.style[r]=s:this.elementToWrap.style.removeProperty(r.replace(/[A-Z]/g,l=>"-"+l.toLowerCase()))}),this.wrapper.style.pointerEvents="auto",this.elementToWrap.style.pointerEvents="auto",this.rightAdSlot&&(this.rightAdSlot.style.width="0%",this.rightAdSlot.style.height="0%"),this.leftAdSlot&&(this.leftAdSlot.style.width="0%",this.leftAdSlot.style.height="0%"),this.bottomAdSlot&&(this.bottomAdSlot.style.height="0%"),this.topAdSlot&&(this.topAdSlot.style.height="0%"),this.overlayAdSlot&&(this.overlayAdSlot.style.height="0%"),this.pipAdSlot&&(this.pipAdSlot.style.width="0px",this.pipAdSlot.style.height="0px"),this.bannerVerticalAdSlot&&(this.bannerVerticalAdSlot.style.width="0%",this.bannerVerticalAdSlot.style.height="100%"),this.bannerHorizontalAdSlot&&(this.bannerHorizontalAdSlot.style.width="100%",this.bannerHorizontalAdSlot.style.height="0%"),M(this)};g(this.wrapper,i),this.wasFluid&&(this.elementToWrap.classList.add("vjs-fluid"),this.wasFluid=!1),this.adControls&&(this.adControls.style.display="none"),this.minimizeBtn&&(this.minimizeBtn.style.display="none"),this.closeBtn&&(this.closeBtn.style.display="none"),setTimeout(()=>{this.wrapper&&(this._originalNextSibling?this._originalParent.insertBefore(this.elementToWrap,this._originalNextSibling):this._originalParent.appendChild(this.elementToWrap),this.wrapper.remove(),this.wrapper=null)},k())}}function S(t,e){t.querySelectorAll("video").forEach(o=>{p.has(o)||e(o)}),t.querySelectorAll("*").forEach(o=>{o.shadowRoot&&S(o.shadowRoot,e)})}function $(t){const e=()=>{document.querySelectorAll("video").forEach(i=>{i.closest(".ad-wrapper")||i.closest(".richmedia-ad")||i.dataset.adMedia!==void 0||p.has(i)||t(i)}),document.querySelectorAll("*").forEach(i=>{i.shadowRoot&&S(i.shadowRoot,t)})};return{scan:e,observe:()=>{const i=new MutationObserver(r=>{let s=!1;for(const l of r)if(l.addedNodes.length){s=!0;break}s&&e()});return i.observe(document.body,{childList:!0,subtree:!0}),i},scanShadow:i=>S(i,t)}}async function q(){const t=document.currentScript;if(!t)return console.warn("[UASDK] No <script> available for config loading."),{};const e=t.getAttribute("data-config");if(!e)return console.warn("[UASDK] No data-config attribute found."),{};try{const i=await(await fetch(e,{cache:"no-store"})).json();return console.log("[UASDK] Loaded config:",i),i}catch(o){return console.error("[UASDK] Error loading config:",o),{}}}const{scan:c,observe:T}=$(t=>new U(t)),u={init(){console.log(`${h} Initializing...`),c(),T(),document.addEventListener("click",()=>c()),document.addEventListener("scroll",()=>c(),{passive:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&c()}),window.addEventListener("focus",()=>c())},scan:c,observe:T,triggerAd(t,e){const o=p.get(t);o?o.showAd(e):console.warn(`${h} Video not initialized`,t)},triggerAll(t){document.querySelectorAll("video").forEach(o=>{const i=p.get(o);i&&i.showAd(t)})}};return window.UniversalAdSDK=u,async function(){const t=await q();window.UniversalAdSettings=t,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>u.init()):u.init()}(),u}();
